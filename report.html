<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FORGESCAN | Forensic Analysis Report</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        :root {
            --primary: #00ff9d;
            --secondary: #00e1ff;
            --danger: #ff3860;
            --warning: #ffcc00;
            --dark: #0a0a0a;
            --darker: #050505;
            --light: #f8f9fa;
            --gray: #2b2b2b;
            --court-blue: #1a3e72;
            --court-gold: #d4af37;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: var(--darker);
            color: var(--light);
            overflow-x: hidden;
        }
        
        /* Modern Navbar */
        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1.5rem 5%;
            background: rgba(10, 10, 10, 0.95);
            backdrop-filter: blur(10px);
            position: fixed;
            width: 100%;
            z-index: 1000;
            border-bottom: 1px solid rgba(0, 255, 157, 0.1);
            box-shadow: 0 5px 30px rgba(0,0,0,0.5);
        }
        
        .logo-text {
            font-weight: 700;
            font-size: 1.5rem;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            letter-spacing: 1px;
        }
        
        .nav-links {
            display: flex;
            gap: 2rem;
        }
        
        .nav-links a {
            color: var(--light);
            text-decoration: none;
            font-weight: 500;
            position: relative;
            transition: all 0.3s ease;
            font-size: 0.95rem;
        }
        
        .nav-links a::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 0;
            height: 2px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            transition: width 0.3s ease;
        }
        
        .nav-links a:hover::after {
            width: 100%;
        }
        
        .nav-links a:hover {
            color: var(--primary);
        }
        
        .nav-cta {
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            color: var(--dark);
            padding: 0.6rem 1.5rem;
            border-radius: 50px;
            font-weight: 600;
            text-decoration: none;
            transition: all 0.3s ease;
            box-shadow: 0 0 15px rgba(0, 255, 157, 0.3);
            font-size: 0.95rem;
        }
        
        .nav-cta:hover {
            transform: translateY(-3px);
            box-shadow: 0 0 25px rgba(0, 255, 157, 0.5);
        }
        
        /* Report Section */
        .report-section {
            padding: 8rem 5% 5rem;
            background-color: var(--dark);
            min-height: 100vh;
        }
        
        .section-header {
            text-align: center;
            margin-bottom: 3rem;
            position: relative;
        }
        
        .section-header h2 {
            font-size: 2.8rem;
            margin-bottom: 1rem;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            display: inline-block;
            position: relative;
            padding-bottom: 1rem;
        }
        
        .section-header h2::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 3px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            border-radius: 3px;
        }
        
        .section-header p {
            color: rgba(255, 255, 255, 0.7);
            max-width: 700px;
            margin: 0 auto;
            line-height: 1.6;
        }
        
        .report-container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .report-card {
            background: rgba(20, 20, 20, 0.8);
            border-radius: 15px;
            padding: 2.5rem;
            margin-bottom: 2rem;
            border: 1px solid rgba(0, 255, 157, 0.1);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            position: relative;
            overflow: hidden;
        }
        
        .report-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 5px;
            height: 100%;
            background: linear-gradient(to bottom, var(--primary), var(--secondary));
        }
        
        .report-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding-bottom: 1.5rem;
            border-bottom: 1px solid rgba(0, 255, 157, 0.1);
        }
        
        .report-title {
            font-size: 1.8rem;
            color: var(--light);
            font-weight: 600;
            letter-spacing: 0.5px;
        }
        
        .report-meta {
            text-align: right;
        }
        
        .report-meta p {
            color: rgba(255, 255, 255, 0.7);
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
        }
        
        .analysis-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin-top: 1.5rem;
        }
        
        .analysis-card {
            background: rgba(30, 30, 30, 0.8);
            border-radius: 12px;
            padding: 1.8rem;
            transition: all 0.3s ease;
            border-left: 4px solid var(--primary);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            position: relative;
            overflow: hidden;
            opacity: 0;
            transform: translateY(20px);
        }
        
        .analysis-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(0,255,157,0.05), rgba(0,225,255,0.05));
            z-index: 0;
        }
        
        .analysis-card:hover {
            transform: translateY(-5px) !important;
            box-shadow: 0 15px 30px rgba(0, 255, 157, 0.2);
        }
        
        .analysis-header {
            display: flex;
            align-items: center;
            margin-bottom: 1.5rem;
            position: relative;
            z-index: 1;
        }
        
        .analysis-icon {
            font-size: 1.8rem;
            margin-right: 1.2rem;
            color: var(--primary);
            background: rgba(0,255,157,0.1);
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 12px;
        }
        
        .analysis-title {
            font-size: 1.4rem;
            color: var(--light);
            font-weight: 600;
        }
        
        .analysis-content {
            margin-top: 1.5rem;
            position: relative;
            z-index: 1;
        }
        
        .analysis-verdict {
            font-weight: 700;
            margin: 0.5rem 0 1rem;
            font-size: 1.1rem;
            display: inline-block;
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            background: rgba(0,255,157,0.1);
        }
        
        .authentic {
            color: var(--primary);
            background: rgba(0,255,157,0.1) !important;
        }
        
        .forged {
            color: var(--danger);
            background: rgba(255,56,96,0.1) !important;
        }
        
        .suspicious {
            color: var(--warning);
            background: rgba(255,204,0,0.1) !important;
        }
        
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
            margin-top: 1.5rem;
        }
        
        .metric-card {
            background: rgba(0, 0, 0, 0.3);
            padding: 1rem;
            border-radius: 8px;
            text-align: center;
            transition: all 0.3s ease;
            border: 1px solid rgba(255,255,255,0.05);
        }
        
        .metric-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            border-color: rgba(0,255,157,0.2);
        }
        
        .metric-name {
            font-size: 0.85rem;
            color: rgba(255, 255, 255, 0.7);
            margin-bottom: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .metric-value {
            font-weight: 700;
            color: var(--light);
            font-size: 1.2rem;
        }
        
        .confidence-meter {
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            margin: 1rem 0;
            overflow: hidden;
        }
        
        .confidence-level {
            height: 100%;
            border-radius: 4px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            transition: width 1.5s ease-out;
        }
        
        .forged .confidence-level {
            background: linear-gradient(90deg, var(--danger), #ff6b8b);
        }
        
        .suspicious .confidence-level {
            background: linear-gradient(90deg, var(--warning), #ffde59);
        }
        
        .verdict-section {
            background: rgba(30, 30, 30, 0.8);
            border-radius: 15px;
            padding: 2.5rem;
            margin-top: 2.5rem;
            border-left: 5px solid var(--primary);
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            position: relative;
            overflow: hidden;
            opacity: 0;
            transform: translateY(20px);
        }
        
        .verdict-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(0,255,157,0.05), rgba(0,225,255,0.05));
            z-index: 0;
        }
        
        .verdict-header {
            display: flex;
            align-items: center;
            margin-bottom: 2rem;
            position: relative;
            z-index: 1;
        }
        
        .verdict-icon {
            font-size: 2.5rem;
            margin-right: 1.5rem;
            color: var(--primary);
            background: rgba(0,255,157,0.1);
            width: 70px;
            height: 70px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 20px;
        }
        
        .verdict-title {
            font-size: 2rem;
            color: var(--light);
            font-weight: 700;
        }
        
        .verdict-content {
            color: rgba(255, 255, 255, 0.9);
            line-height: 1.8;
            margin-bottom: 2rem;
            position: relative;
            z-index: 1;
            font-size: 1.05rem;
        }
        
        .verdict-stats {
            display: flex;
            justify-content: space-around;
            margin-top: 2.5rem;
            flex-wrap: wrap;
            gap: 1.5rem;
            position: relative;
            z-index: 1;
        }
        
        .stat-item {
            text-align: center;
            min-width: 180px;
            background: rgba(0,0,0,0.3);
            padding: 1.5rem 1rem;
            border-radius: 12px;
            transition: all 0.3s ease;
            border: 1px solid rgba(255,255,255,0.05);
        }
        
        .stat-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.3);
            border-color: rgba(0,255,157,0.3);
        }
        
        .stat-value {
            font-size: 2.5rem;
            font-weight: 800;
            margin: 0.5rem 0;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        
        .authentic .stat-value {
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        
        .forged .stat-value {
            background: linear-gradient(90deg, var(--danger), #ff6b8b);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        
        .suspicious .stat-value {
            background: linear-gradient(90deg, var(--warning), #ffde59);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        
        .stat-label {
            font-size: 0.95rem;
            color: rgba(255, 255, 255, 0.7);
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .indicators {
            margin-top: 2.5rem;
            background: rgba(0,0,0,0.3);
            padding: 1.5rem;
            border-radius: 12px;
            border-left: 4px solid var(--secondary);
        }
        
        .indicators h3 {
            font-size: 1.4rem;
            margin-bottom: 1.5rem;
            color: var(--light);
            display: flex;
            align-items: center;
        }
        
        .indicators h3 i {
            margin-right: 0.8rem;
            color: var(--secondary);
        }
        
        .indicators ul {
            padding-left: 1.5rem;
        }
        
        .indicators li {
            margin-bottom: 1rem;
            color: rgba(255, 255, 255, 0.9);
            position: relative;
            line-height: 1.6;
        }
        
        .indicators li::before {
            content: '•';
            color: var(--secondary);
            font-weight: bold;
            display: inline-block;
            width: 1em;
            margin-left: -1em;
        }
        
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            color: var(--dark);
            padding: 14px 30px;
            border-radius: 50px;
            text-decoration: none;
            font-weight: 700;
            margin-top: 2rem;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 0 20px rgba(0, 255, 157, 0.4);
            font-size: 1rem;
            letter-spacing: 0.5px;
        }
        
        .btn i {
            margin-right: 0.8rem;
        }
        
        .btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 0 30px rgba(0, 255, 157, 0.6);
        }
        
        .btn-container {
            text-align: center;
            margin-top: 3rem;
        }
        
        /* Charts */
        .chart-container {
            background: rgba(0,0,0,0.3);
            border-radius: 12px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            position: relative;
        }
        
        .chart-title {
            font-size: 1.2rem;
            margin-bottom: 1rem;
            color: var(--light);
            font-weight: 600;
            display: flex;
            align-items: center;
        }
        
        .chart-title i {
            margin-right: 0.8rem;
            color: var(--secondary);
        }
        
        /* Model Status */
        .model-status {
            background: rgba(30, 30, 30, 0.8);
            border-radius: 12px;
            padding: 1.5rem;
            margin: 2rem 0;
            border-left: 4px solid var(--primary);
        }
        
        .model-status h3 {
            font-size: 1.3rem;
            margin-bottom: 1rem;
            color: var(--light);
            display: flex;
            align-items: center;
        }
        
        .model-status h3 i {
            margin-right: 0.8rem;
            color: var(--primary);
        }
        
        .model-status-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 1rem;
            margin-top: 1.5rem;
        }
        
        .model-item {
            display: flex;
            align-items: center;
            font-size: 1rem;
            background: rgba(0,0,0,0.3);
            padding: 0.8rem 1rem;
            border-radius: 8px;
            transition: all 0.3s ease;
            gap: 1rem;
        }

        .model-item i {
            font-size: 1.2rem;
            color: var(--primary);
            min-width: 24px;
            text-align: center;
        }

        .model-item > div {
            flex: 1;
        }

        .model-value {
            font-weight: 600;
            color: var(--light);
            margin-top: 0.2rem;
            word-break: break-all;
        }
        
        /* Court Submission Section */
        .court-submission {
            background: rgba(26, 62, 114, 0.2);
            border-radius: 15px;
            padding: 2.5rem;
            margin-top: 3rem;
            border-left: 5px solid var(--court-gold);
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            position: relative;
            overflow: hidden;
        }
        
        .court-submission::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(26, 62, 114, 0.1), rgba(212, 175, 55, 0.1));
            z-index: 0;
        }
        
        .court-header {
            display: flex;
            align-items: center;
            margin-bottom: 2rem;
            position: relative;
            z-index: 1;
        }
        
        .court-icon {
            font-size: 2.5rem;
            margin-right: 1.5rem;
            color: var(--court-gold);
            background: rgba(212, 175, 55, 0.1);
            width: 70px;
            height: 70px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 20px;
        }
        
        .court-title {
            font-size: 1.8rem;
            color: var(--light);
            font-weight: 700;
        }
        
        .court-content {
            color: rgba(255, 255, 255, 0.9);
            line-height: 1.8;
            margin-bottom: 2rem;
            position: relative;
            z-index: 1;
            font-size: 1.05rem;
        }
        
        .download-btn {
            display: inline-flex;
            align-items: center;
            background: linear-gradient(90deg, var(--court-gold), #e8c352);
            color: var(--dark);
            padding: 14px 30px;
            border-radius: 50px;
            text-decoration: none;
            font-weight: 700;
            transition: all 0.3s ease;
            box-shadow: 0 0 20px rgba(212, 175, 55, 0.4);
            font-size: 1rem;
            position: relative;
            z-index: 1;
        }
        
        .download-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 0 30px rgba(212, 175, 55, 0.6);
        }
        
        .download-btn i {
            margin-right: 0.8rem;
        }
        
        /* Watermark */
        .watermark {
            position: absolute;
            bottom: 20px;
            right: 20px;
            font-size: 0.8rem;
            color: rgba(255,255,255,0.2);
            z-index: 0;
        }
        @media print {
    body {
        background: white !important;
        color: black !important;
    }
    .report-card {
        box-shadow: none !important;
        border: none !important;
    }
    .analysis-card, .verdict-section {
        page-break-inside: avoid;
    }
}
        
        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .fade-in {
            animation: fadeIn 0.8s ease-out forwards;
        }
        
        /* Responsive */
        @media (max-width: 1200px) {
            .analysis-grid {
                grid-template-columns: 1fr;
            }
            
            .metrics-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        @media (max-width: 768px) {
            .navbar {
                flex-direction: column;
                gap: 1rem;
                padding: 1rem;
            }
            
            .nav-links {
                gap: 1rem;
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .report-section {
                padding-top: 7rem;
            }
            
            .section-header h2 {
                font-size: 2.2rem;
            }
            
            .report-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 1.5rem;
            }
            
            .report-meta {
                text-align: left;
                width: 100%;
            }
            
            .verdict-header, .court-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 1.5rem;
            }
            
            .verdict-icon, .court-icon {
                margin-right: 0;
            }
            
            .stat-item {
                min-width: 100%;
            }
        }
        
        @media (max-width: 480px) {
            .metrics-grid {
                grid-template-columns: 1fr;
            }
            
            .section-header h2 {
                font-size: 1.8rem;
            }
            
            .report-title {
                font-size: 1.5rem;
            }
            
            .analysis-card, .verdict-section, .court-submission {
                padding: 1.5rem;
            }
            
            .btn, .download-btn {
                width: 100%;
                padding: 12px 20px;
            }
        }
    </style>
</head>

<body>
    <!-- Modern Navbar -->
    <nav class="navbar">
        <div class="logo-text">FORGESCAN</div>
        <div class="nav-links">
            <a href="index.html"><i class="fas fa-home"></i> Home</a>
            <a href="index.html#tools"><i class="fas fa-tools"></i> Tools</a>
            <a href="case.html"><i class="fas fa-book"></i> Case Study</a>
            <a href="analysis.html"><i class="fas fa-search"></i> Analysis</a>
        </div>
        <a href="index.html#contact" class="nav-cta"><i class="fas fa-user-plus"></i> Register</a>
    </nav>
    
    <!-- Report Section -->
    <section class="report-section">
        <div class="section-header">
            <h2>Forensic Analysis Report</h2>
            <p>Comprehensive document authentication results with detailed forensic markers analysis, prepared for court submission</p>
        </div>
        
        <div class="report-container">
            <div class="report-card">
                <div class="report-header">
                    <h2 class="report-title">FORGESCAN OFFICIAL REPORT</h2>
                    <div class="report-meta">
                        <p><i class="fas fa-fingerprint"></i> Case #<span id="caseNumber">FSC-${Math.floor(100000 + Math.random() * 900000)}</span></p>
                        <p><i class="far fa-calendar-alt"></i> <span id="currentDate">${new Date().toLocaleString('en-US', {year: 'numeric', month: 'long', day: 'numeric', hour: '2-digit', minute: '2-digit'})}</span></p>
                        <p style="color: var(--secondary);"><i class="fas fa-lock"></i> Confidential</p>
                    </div>
                </div>
                
                <div id="report-content">
                    <!-- Document Overview Section -->
                    <div class="model-status">
                        <h3><i class="fas fa-info-circle"></i> Document Overview</h3>
                        <p style="color: rgba(255,255,255,0.8); margin-bottom: 1rem; line-height: 1.6;">
                            The submitted document has been analyzed using 8 specialized forensic models examining 23 distinct forensic markers.
                        </p>
                        
                        <div class="model-status-list">
                            <div class="model-item">
                                <i class="fas fa-file-alt"></i> 
                                <div>
                                    <div>Document Type</div>
                                    <div class="model-value" id="docType">Legal Document (IMG)</div>
                                </div>
                            </div>
                            <div class="model-item">
                                <i class="fas fa-hashtag"></i> 
                                <div>
                                    <div>Hash Value</div>
                                    <div class="model-value" id="hashValue" style="font-family: monospace; font-size: 0.85rem;">
                                        ${'a1b2c3d4e5f6'+Math.random().toString(16).substr(2,6)}
                                    </div>
                                </div>
                            </div>
                            <div class="model-item">
                                <i class="fas fa-ruler-combined"></i> 
                                <div>
                                    <div>Dimensions</div>
                                    <div class="model-value" id="dimensions">210mm × 297mm (A4)</div>
                                </div>
                            </div>
                            <div class="model-item">
                                <i class="fas fa-file-signature"></i> 
                                <div>
                                    <div>Pages</div>
                                    <div class="model-value" id="pageCount">1</div>
                                </div>
                            </div>
                            <div class="model-item">
                                <i class="fas fa-database"></i> 
                                <div>
                                    <div>File Size</div>
                                    <div class="model-value" id="fileSize">124 KB</div>
                                </div>
                            </div>
                            <div class="model-item">
                                <i class="fas fa-clock"></i> 
                                <div>
                                    <div>Analysis Duration</div>
                                    <div class="model-value" id="analysisDuration">4.2 seconds</div>
                                </div>
                            </div>
                        </div>
                        
                        <div style="margin-top: 1.5rem;">
                            <p style="font-size: 0.9rem; color: rgba(255,255,255,0.7); margin-bottom: 0.5rem;">Forensic Models Used:</p>
                            <div style="display: flex; flex-wrap: wrap; gap: 0.5rem;">
                                <span style="background: rgba(0,255,157,0.1); color: var(--primary); padding: 0.3rem 0.8rem; border-radius: 20px; font-size: 0.8rem;">
                                    Signature Verification
                                </span>
                                <span style="background: rgba(0,255,157,0.1); color: var(--primary); padding: 0.3rem 0.8rem; border-radius: 20px; font-size: 0.8rem;">
                                    Ink Spectral Analysis
                                </span>
                                <span style="background: rgba(0,255,157,0.1); color: var(--primary); padding: 0.3rem 0.8rem; border-radius: 20px; font-size: 0.8rem;">
                                    Paper Fiber Analysis
                                </span>
                                <span style="background: rgba(0,255,157,0.1); color: var(--primary); padding: 0.3rem 0.8rem; border-radius: 20px; font-size: 0.8rem;">
                                    Digital Tamper Detection
                                </span>
                                <span style="background: rgba(0,255,157,0.1); color: var(--primary); padding: 0.3rem 0.8rem; border-radius: 20px; font-size: 0.8rem;">
                                    Error Level Analysis
                                </span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Analysis Grid -->
                    <div class="analysis-grid">
                        <!-- Signature Analysis -->
                        <div class="analysis-card">
                            <div class="analysis-header">
                                <div class="analysis-icon"><i class="fas fa-signature"></i></div>
                                <h3 class="analysis-title">Signature Analysis</h3>
                            </div>
                            <div class="analysis-content">
                                <p style="color: rgba(255,255,255,0.8); margin-bottom: 1rem;">
                                    Signature analysis examines stroke patterns, pressure points, and natural variations to determine authenticity.
                                </p>
                                
                                <div class="analysis-verdict authentic">
                                    <i class="fas fa-check-circle"></i> Verdict: AUTHENTIC
                                </div>
                                <div class="confidence-meter">
                                    <div class="confidence-level" style="width: 87%"></div>
                                </div>
                                <p style="margin-bottom: 1.5rem;">Confidence: <strong>87%</strong></p>
                                
                                <div style="margin-bottom: 1rem;">
                                    <p style="font-size: 0.9rem; color: rgba(255,255,255,0.7); margin-bottom: 0.5rem;">Key Metrics:</p>
                                    <div class="metrics-grid">
                                        <div class="metric-card">
                                            <div class="metric-name">Stroke Consistency</div>
                                            <div class="metric-value">0.85</div>
                                        </div>
                                        <div class="metric-card">
                                            <div class="metric-name">Pressure Variance</div>
                                            <div class="metric-value">0.78</div>
                                        </div>
                                        <div class="metric-card">
                                            <div class="metric-name">Speed Analysis</div>
                                            <div class="metric-value">0.82</div>
                                        </div>
                                        <div class="metric-card">
                                            <div class="metric-name">Natural Variation</div>
                                            <div class="metric-value">0.79</div>
                                        </div>
                                        <div class="metric-card">
                                            <div class="metric-name">Pattern Match</div>
                                            <div class="metric-value">0.91</div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="chart-container">
                                    <div class="chart-title"><i class="fas fa-chart-line"></i> Signature Consistency Metrics</div>
                                    <canvas id="signatureChart" height="200"></canvas>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Ink Analysis -->
                        <div class="analysis-card">
                            <div class="analysis-header">
                                <div class="analysis-icon"><i class="fas fa-pen-fancy"></i></div>
                                <h3 class="analysis-title">Ink Analysis</h3>
                            </div>
                            <div class="analysis-content">
                                <p style="color: rgba(255,255,255,0.8); margin-bottom: 1rem;">
                                    Ink analysis evaluates chemical composition, age consistency, and application methods.
                                </p>
                                
                                <div class="analysis-verdict authentic">
                                    <i class="fas fa-check-circle"></i> Verdict: CONSISTENT
                                </div>
                                <div class="confidence-meter">
                                    <div class="confidence-level" style="width: 92%"></div>
                                </div>
                                <p style="margin-bottom: 1.5rem;">Confidence: <strong>92%</strong></p>
                                
                                <div style="margin-bottom: 1rem;">
                                    <p style="font-size: 0.9rem; color: rgba(255,255,255,0.7); margin-bottom: 0.5rem;">Key Metrics:</p>
                                    <div class="metrics-grid">
                                        <div class="metric-card">
                                            <div class="metric-name">Chemical Match</div>
                                            <div class="metric-value">0.95</div>
                                        </div>
                                        <div class="metric-card">
                                            <div class="metric-name">Age Consistency</div>
                                            <div class="metric-value">0.89</div>
                                        </div>
                                        <div class="metric-card">
                                            <div class="metric-name">Application Method</div>
                                            <div class="metric-value">0.93</div>
                                        </div>
                                        <div class="metric-card">
                                            <div class="metric-name">Spectral Analysis</div>
                                            <div class="metric-value">0.91</div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="chart-container">
                                    <div class="chart-title"><i class="fas fa-chart-pie"></i> Ink Composition Analysis</div>
                                    <canvas id="inkChart" height="200"></canvas>
                                </div>
                            </div>
                        </div>
                        <!-- Paper Analysis Card - Place this in the analysis-grid section -->
<div class="analysis-card">
    <div class="analysis-header">
        <div class="analysis-icon"><i class="fas fa-file-alt"></i></div>
        <h3 class="analysis-title">Paper Analysis</h3>
    </div>
    <div class="analysis-content">
        <p style="color: rgba(255,255,255,0.8); margin-bottom: 1rem;">
            Paper analysis examines fiber distribution, watermarks, and aging patterns to verify document authenticity.
        </p>
        
        <div class="analysis-verdict authentic">
            <i class="fas fa-check-circle"></i> Verdict: AUTHENTIC
        </div>
        <div class="confidence-meter">
            <div class="confidence-level" style="width: 94%"></div>
        </div>
        <p style="margin-bottom: 1.5rem;">Confidence: <strong>94%</strong></p>
        
        <div style="margin-bottom: 1rem;">
            <p style="font-size: 0.9rem; color: rgba(255,255,255,0.7); margin-bottom: 0.5rem;">Key Metrics:</p>
            <div class="metrics-grid">
                <div class="metric-card">
                    <div class="metric-name">Fiber Density</div>
                    <div class="metric-value">0.96</div>
                </div>
                <div class="metric-card">
                    <div class="metric-name">Watermark Match</div>
                    <div class="metric-value">0.98</div>
                </div>
                <div class="metric-card">
                    <div class="metric-name">Aging Pattern</div>
                    <div class="metric-value">0.92</div>
                </div>
                <div class="metric-card">
                    <div class="metric-name">UV Response</div>
                    <div class="metric-value">0.93</div>
                </div>
            </div>
        </div>
        
        <div class="chart-container">
            <div class="chart-title"><i class="fas fa-chart-area"></i> Paper Fiber Distribution</div>
            <canvas id="paperChart" height="200"></canvas>
        </div>
    </div>
</div>
                        
                        <!-- ELA Analysis -->
                        <div class="analysis-card">
                            <div class="analysis-header">
                                <div class="analysis-icon"><i class="fas fa-fire"></i></div>
                                <h3 class="analysis-title">Error Level Analysis</h3>
                            </div>
                            <div class="analysis-content">
                                <p style="color: rgba(255,255,255,0.8); margin-bottom: 1rem;">
                                    Error Level Analysis identifies compression artifacts and tampered regions by analyzing JPEG compression levels.
                                </p>
                                
                                <div class="analysis-verdict suspicious">
                                    <i class="fas fa-question-circle"></i> Verdict: SUSPICIOUS AREAS DETECTED
                                </div>
                                <div class="confidence-meter">
                                    <div class="confidence-level suspicious" style="width: 72%"></div>
                                </div>
                                <p style="margin-bottom: 1.5rem;">Confidence: <strong>72%</strong></p>
                                
                                <div class="chart-container" style="position: relative;">
                                    <div class="chart-title"><i class="fas fa-fire"></i> ELA Heatmap Visualization</div>
                                    <div id="elaHeatmap" style="background: #000; padding: 1rem; border-radius: 8px; text-align: center;">
                                        <canvas id="elaCanvas" width="500" height="300" style="max-width: 100%; border-radius: 5px;"></canvas>
                                        <p style="color: rgba(255,255,255,0.6); margin-top: 0.5rem; font-size: 0.8rem;">
                                            Interactive heatmap showing manipulation likelihood (red = high error levels)
                                        </p>
                                    </div>
                                </div>
                                
                                <div style="margin-top: 1.5rem;">
                                    <p style="font-size: 0.9rem; color: rgba(255,255,255,0.7); margin-bottom: 0.5rem;">ELA Metrics:</p>
                                    <div class="metrics-grid">
                                        <div class="metric-card">
                                            <div class="metric-name">High-Error Zones</div>
                                            <div class="metric-value">4</div>
                                        </div>
                                        <div class="metric-card">
                                            <div class="metric-name">Max Error Level</div>
                                            <div class="metric-value">0.86</div>
                                        </div>
                                        <div class="metric-card">
                                            <div class="metric-name">Compression</div>
                                            <div class="metric-value">92% JPEG</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Digital Analysis -->
                        <div class="analysis-card">
                            <div class="analysis-header">
                                <div class="analysis-icon"><i class="fas fa-laptop-code"></i></div>
                                <h3 class="analysis-title">Digital Analysis</h3>
                            </div>
                            <div class="analysis-content">
                                <p style="color: rgba(255,255,255,0.8); margin-bottom: 1rem;">
                                    Digital forensics examines metadata integrity, edit history, and software fingerprints.
                                </p>
                                
                                <div class="analysis-verdict suspicious">
                                    <i class="fas fa-exclamation-triangle"></i> Verdict: METADATA ANOMALIES
                                </div>
                                <div class="confidence-meter">
                                    <div class="confidence-level suspicious" style="width: 64%"></div>
                                </div>
                                <p style="margin-bottom: 1.5rem;">Confidence: <strong>64%</strong></p>
                                
                                <div style="margin-bottom: 1rem;">
                                    <p style="font-size: 0.9rem; color: rgba(255,255,255,0.7); margin-bottom: 0.5rem;">Key Findings:</p>
                                    <div class="metrics-grid">
                                        <div class="metric-card">
                                            <div class="metric-name">Tamper Probability</div>
                                            <div class="metric-value">0.42</div>
                                        </div>
                                        <div class="metric-card">
                                            <div class="metric-name">Edit History</div>
                                            <div class="metric-value">3 revisions</div>
                                        </div>
                                        <div class="metric-card">
                                            <div class="metric-name">Creation Tool</div>
                                            <div class="metric-value">Photoshop</div>
                                        </div>
                                        <div class="metric-card">
                                            <div class="metric-name">Date Mismatch</div>
                                            <div class="metric-value">Yes</div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="chart-container">
                                    <div class="chart-title"><i class="fas fa-chart-bar"></i> Digital Integrity Metrics</div>
                                    <canvas id="digitalChart" height="200"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Final Verdict -->
                    <div class="verdict-section" style="border-left-color: var(--primary)">
                        <div class="verdict-header">
                            <div class="verdict-icon" style="color: var(--primary)">
                                <i class="fas fa-gavel"></i>
                            </div>
                            <h3 class="verdict-title">Final Verdict: AUTHENTIC WITH MINOR ANOMALIES</h3>
                        </div>
                        <div class="verdict-content">
                            <p>Our comprehensive forensic analysis has determined that this document is <strong style="color: var(--primary)">AUTHENTIC WITH MINOR ANOMALIES</strong> with 89% confidence based on 23 forensic markers.</p>
                            
                            <div class="indicators">
                                <h3><i class="fas fa-search-plus"></i> Key Forensic Indicators</h3>
                                <ul>
                                    <li>Signature matches known samples (87% confidence)</li>
                                    <li>Ink composition consistent with document age</li>
                                    <li>Minor metadata anomalies detected</li>
                                    <li>Paper stock matches expected manufacturer</li>
                                </ul>
                            </div>
                            
                            <div class="chart-container">
                                <div class="chart-title"><i class="fas fa-chart-line"></i> Forensic Markers Analysis</div>
                                <canvas id="forensicChart" height="250"></canvas>
                            </div>
                            
                            <div class="verdict-stats">
                                <div class="stat-item authentic">
                                    <div class="stat-label">Overall Confidence</div>
                                    <div class="stat-value">89%</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-label">Signature Match</div>
                                    <div class="stat-value">87%</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-label">Ink Consistency</div>
                                    <div class="stat-value">92%</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-label">Metadata Integrity</div>
                                    <div class="stat-value">58%</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-label">Paper Authenticity</div>
                                    <div class="stat-value">94%</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Court Submission -->
                    <div class="court-submission">
                        <div class="court-header">
                            <div class="court-icon">
                                <i class="fas fa-balance-scale"></i>
                            </div>
                            <h3 class="court-title">Court Submission Package</h3>
                        </div>
                        <div class="court-content">
                            <p>This forensic analysis report has been prepared according to legal standards for court submission. The complete package includes:</p>
                            <ul style="margin-top: 1rem; padding-left: 1.5rem;">
                                <li style="margin-bottom: 0.8rem;">Detailed forensic analysis report (PDF)</li>
                                <li style="margin-bottom: 0.8rem;">Supporting technical documentation</li>
                                <li style="margin-bottom: 0.8rem;">Expert witness statement (if required)</li>
                                <li>Chain of custody documentation</li>
                            </ul>
                        </div>
                        <a href="#" class="download-btn" id="downloadReport"><i class="fas fa-file-pdf"></i> Download Complete Report</a>
                    </div>
                    
                    <div class="btn-container">
                        <a href="/analysis.html" class="btn"><i class="fas fa-redo"></i> Analyze Another Document</a>
                    </div>
                </div>
                
                <div class="watermark">FORGESCAN v3.2.1 | CONFIDENTIAL</div>
            </div>
        </div>
    </section>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize all charts
            initializeCharts();
            
            // Animate elements
            animateReport();
            
            // Set up PDF download
            document.getElementById('downloadReport').addEventListener('click', generatePDF);
        });

        function initializeCharts() {
            // Signature Chart
            const sigCtx = document.getElementById('signatureChart').getContext('2d');
            new Chart(sigCtx, {
                type: 'radar',
                data: {
                    labels: ['STROKE CONSISTENCY', 'PRESSURE VARIANCE', 'SPEED ANALYSIS', 'NATURAL VARIATION', 'PATTERN MATCH'],
                    datasets: [{
                        label: 'Signature Metrics',
                        data: [0.85, 0.78, 0.82, 0.79, 0.91],
                        backgroundColor: 'rgba(0, 255, 157, 0.2)',
                        borderColor: 'rgba(0, 255, 157, 1)',
                        borderWidth: 2,
                        pointBackgroundColor: 'rgba(0, 255, 157, 1)',
                        pointRadius: 4
                    }]
                },
                options: {
                    scales: {
                        r: {
                            angleLines: { color: 'rgba(255,255,255,0.1)' },
                            grid: { color: 'rgba(255,255,255,0.1)' },
                            pointLabels: { color: 'rgba(255,255,255,0.8)' },
                            ticks: {
                                backdropColor: 'transparent',
                                color: 'rgba(255,255,255,0.5)',
                                stepSize: 0.2,
                                min: 0,
                                max: 1
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            labels: { color: 'rgba(255,255,255,0.8)' }
                        }
                    }
                }
            });
            
            // Ink Chart
            const inkCtx = document.getElementById('inkChart').getContext('2d');
            new Chart(inkCtx, {
                type: 'doughnut',
                data: {
                    labels: ['CHEMICAL MATCH', 'AGE CONSISTENCY', 'APPLICATION METHOD', 'SPECTRAL ANALYSIS'],
                    datasets: [{
                        data: [0.95, 0.89, 0.93, 0.91],
                        backgroundColor: [
                            'rgba(0, 255, 157, 0.7)',
                            'rgba(0, 225, 255, 0.7)',
                            'rgba(0, 150, 255, 0.7)',
                            'rgba(0, 100, 255, 0.7)'
                        ],
                        borderColor: 'rgba(20, 20, 20, 0.8)',
                        borderWidth: 2
                    }]
                },
                options: {
                    plugins: {
                        legend: {
                            position: 'right',
                            labels: { color: 'rgba(255,255,255,0.8)' }
                        }
                    },
                    cutout: '65%'
                }
            });
            
            // Digital Chart
            const digCtx = document.getElementById('digitalChart').getContext('2d');
            new Chart(digCtx, {
                type: 'bar',
                data: {
                    labels: ['METADATA', 'TIMESTAMPS', 'COMPRESSION', 'SOFTWARE'],
                    datasets: [{
                        label: 'Anomaly Score',
                        data: [0.42, 0.68, 0.55, 0.73],
                        backgroundColor: [
                            'rgba(255, 99, 132, 0.7)',
                            'rgba(255, 159, 64, 0.7)',
                            'rgba(255, 205, 86, 0.7)',
                            'rgba(75, 192, 192, 0.7)'
                        ],
                        borderColor: [
                            'rgba(255, 99, 132, 1)',
                            'rgba(255, 159, 64, 1)',
                            'rgba(255, 205, 86, 1)',
                            'rgba(75, 192, 192, 1)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 1,
                            grid: { color: 'rgba(255,255,255,0.1)' },
                            ticks: { color: 'rgba(255,255,255,0.7)' }
                        },
                        x: {
                            grid: { display: false },
                            ticks: { color: 'rgba(255,255,255,0.7)' }
                        }
                    },
                    plugins: {
                        legend: { display: false }
                    }
                }
            });
            
            // Forensic Chart
            const forensicCtx = document.getElementById('forensicChart').getContext('2d');
            new Chart(forensicCtx, {
                type: 'bar',
                data: {
                    labels: ['SIGNATURE', 'INK', 'PAPER', 'DIGITAL', 'ELA', 'OVERALL'],
                    datasets: [
                        {
                            label: 'Authenticity Score',
                            data: [87, 92, 94, 42, 28, 89],
                            backgroundColor: 'rgba(0, 255, 157, 0.7)',
                            borderColor: 'rgba(0, 255, 157, 1)',
                            borderWidth: 1
                        },
                        {
                            label: 'Forgery Indicators',
                            data: [13, 8, 6, 58, 72, 11],
                            backgroundColor: 'rgba(255, 56, 96, 0.7)',
                            borderColor: 'rgba(255, 56, 96, 1)',
                            borderWidth: 1
                        }
                    ]
                },
                options: {
                    responsive: true,
                    scales: {
                        x: {
                            stacked: true,
                            grid: { display: false },
                            ticks: { color: 'rgba(255,255,255,0.7)' }
                        },
                        y: {
                            stacked: true,
                            grid: { color: 'rgba(255,255,255,0.1)' },
                            ticks: { 
                                color: 'rgba(255,255,255,0.7)',
                                callback: function(value) { return value + '%'; }
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            labels: { color: 'rgba(255,255,255,0.8)' }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return context.dataset.label + ': ' + context.raw.toFixed(1) + '%';
                                }
                            }
                        }
                    }
                }
            });
            // Paper Chart Initialization
const paperCtx = document.getElementById('paperChart').getContext('2d');
new Chart(paperCtx, {
    type: 'line',
    data: {
        labels: ['FIBER DENSITY', 'WATERMARK', 'AGING', 'CHEMICAL TEST', 'UV RESPONSE'],
        datasets: [{
            label: 'Paper Analysis',
            data: [0.96, 0.98, 0.92, 0.95, 0.93],
            backgroundColor: 'rgba(0, 225, 255, 0.1)',
            borderColor: 'rgba(0, 225, 255, 1)',
            borderWidth: 2,
            tension: 0.4,
            fill: true,
            pointBackgroundColor: 'rgba(0, 225, 255, 1)',
            pointRadius: 4
        }]
    },
    options: {
        scales: {
            y: {
                beginAtZero: true,
                max: 1,
                grid: { color: 'rgba(255,255,255,0.1)' },
                ticks: { color: 'rgba(255,255,255,0.7)' }
            },
            x: {
                grid: { display: false },
                ticks: { color: 'rgba(255,255,255,0.7)' }
            }
        },
        plugins: {
            legend: {
                labels: { color: 'rgba(255,255,255,0.8)' }
            }
        }
    }
});
            
            // Animated ELA Heatmap
            const canvas = document.getElementById('elaCanvas');
            const ctx = canvas.getContext('2d');
            const width = canvas.width;
            const height = canvas.height;
            
            const heatmapData = [];
            for (let y = 0; y < height; y += 5) {
                for (let x = 0; x < width; x += 5) {
                    const isHotspot = Math.random() < 0.1;
                    const value = isHotspot ? 
                        Math.min(0.7 + Math.random() * 0.3, 1) : 
                        Math.random() * 0.3;
                    
                    heatmapData.push({
                        x: x,
                        y: y,
                        value: value,
                        radius: 10 + Math.random() * 15
                    });
                }
            }
            
            function animateHeatmap(timestamp) {
                ctx.clearRect(0, 0, width, height);
                ctx.fillStyle = '#f8f8f8';
                ctx.fillRect(0, 0, width, height);
                
                heatmapData.forEach(point => {
                    const pulse = 0.8 + 0.2 * Math.sin(timestamp / 500 + point.x / 50);
                    const alpha = point.value * pulse;
                    
                    const gradient = ctx.createRadialGradient(
                        point.x, point.y, 0,
                        point.x, point.y, point.radius
                    );
                    
                    if (point.value > 0.7) {
                        gradient.addColorStop(0, `rgba(255, 50, 50, ${alpha})`);
                        gradient.addColorStop(1, 'rgba(255, 50, 50, 0)');
                    } else if (point.value > 0.4) {
                        gradient.addColorStop(0, `rgba(255, 165, 0, ${alpha*0.7})`);
                        gradient.addColorStop(1, 'rgba(255, 165, 0, 0)');
                    } else {
                        gradient.addColorStop(0, `rgba(100, 200, 255, ${alpha*0.3})`);
                        gradient.addColorStop(1, 'rgba(100, 200, 255, 0)');
                    }
                    
                    ctx.fillStyle = gradient;
                    ctx.fillRect(
                        point.x - point.radius, 
                        point.y - point.radius,
                        point.radius * 2, 
                        point.radius * 2
                    );
                });
                
                ctx.strokeStyle = '#333';
                ctx.lineWidth = 1;
                ctx.strokeRect(50, 50, width-100, height-100);
                ctx.fillStyle = '#333';
                ctx.font = '14px Arial';
                ctx.fillText('Sample Document Content', 70, 80);
                ctx.font = '12px Arial';
                ctx.fillText('This area shows potential manipulation', 70, 110);
                
                requestAnimationFrame(animateHeatmap);
            }
            
            animateHeatmap(0);
        }

        function animateReport() {
            const cards = document.querySelectorAll('.analysis-card, .verdict-section');
            cards.forEach((card, index) => {
                setTimeout(() => {
                    card.style.opacity = '1';
                    card.style.transform = 'translateY(0)';
                }, 150 * index);
            });
            
            setTimeout(() => {
                const meters = document.querySelectorAll('.confidence-level');
                meters.forEach(meter => {
                    const width = meter.style.width;
                    meter.style.width = '0';
                    setTimeout(() => {
                        meter.style.width = width;
                    }, 100);
                });
            }, 300);
        }
        function generatePDF(e) {
    e.preventDefault();
    const btn = document.getElementById('downloadReport');
    btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Generating PDF...';
    btn.style.pointerEvents = 'none';
    
    const { jsPDF } = window.jspdf;
    const pdf = new jsPDF('p', 'pt', 'a4');
    const currentDate = new Date().toLocaleString('en-US', {
        year: 'numeric',
        month: '2-digit',
        day: '2-digit',
        hour: '2-digit',
        minute: '2-digit'
    }).replace(/[/]/g, '-').replace(/[,]/g, '_');
    
    // Capture each section separately
    const elements = [
        document.querySelector('.report-header'),
        document.querySelector('.model-status'),
        ...document.querySelectorAll('.analysis-card'),
        document.querySelector('.verdict-section')
    ];
    
    let position = 0;
    const promises = [];
    
    elements.forEach((element, index) => {
        promises.push(
            html2canvas(element, {
                scale: 1.5,
                logging: false,
                useCORS: true
            }).then(canvas => {
                const imgData = canvas.toDataURL('image/png');
                const imgWidth = pdf.internal.pageSize.getWidth() - 40;
                const imgHeight = (canvas.height * imgWidth) / canvas.width;
                
                if (position + imgHeight > pdf.internal.pageSize.getHeight() && index !== 0) {
                    pdf.addPage();
                    position = 0;
                }
                
                pdf.addImage(imgData, 'PNG', 20, position + 20, imgWidth, imgHeight);
                position += imgHeight + 30;
                
                // Add section separator
                if (index < elements.length - 1) {
                    pdf.setDrawColor(0, 255, 157);
                    pdf.setLineWidth(1);
                    pdf.line(20, position, pdf.internal.pageSize.getWidth() - 20, position);
                    position += 20;
                }
            })
        );
    });
    
    Promise.all(promises).then(() => {
        // Add footer
        pdf.setFontSize(10);
        pdf.setTextColor(150);
        pdf.text(
            `Generated by FORGESCAN on ${currentDate}`,
            pdf.internal.pageSize.getWidth() / 2,
            pdf.internal.pageSize.getHeight() - 20,
            { align: 'center' }
        );
        
        // Save PDF
        pdf.save(`Report_${currentDate}.pdf`);
        
        btn.innerHTML = '<i class="fas fa-file-pdf"></i> Download Complete Report';
        btn.style.pointerEvents = 'auto';
    });
}
    </script>
</body>
</html>